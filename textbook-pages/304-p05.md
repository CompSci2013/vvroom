---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| `Cannot find module './domain-config-validator.service'` | Validator not created yet | Complete Section 305 first |
| `No active domain` error | No domains registered | Register at least one domain |
| `Domain 'X' not found` | Domain not registered | Check spelling, ensure registration happened |
| Validation errors on register | Config missing required fields | Check DomainConfig interface requirements |
| Console warnings about overwriting | Same domain registered twice | Remove duplicate registration |

---

## Key Takeaways

1. **Registry pattern enables runtime flexibility** — Register, retrieve, switch domains dynamically
2. **Injection tokens simplify component DI** — Components inject DOMAIN_CONFIG, not the registry
3. **Validation catches errors early** — Invalid configs fail at registration, not at runtime

---

## Acceptance Criteria

- [ ] `src/app/framework/services/domain-config-registry.service.ts` exists
- [ ] Barrel file exports the service and DOMAIN_CONFIG token
- [ ] Service is `@Injectable({ providedIn: 'root' })`
- [ ] `register()` validates and stores configurations
- [ ] `get()` retrieves configurations by name
- [ ] `getActive()` returns the active domain configuration
- [ ] `setActive()` changes the active domain
- [ ] First registered domain becomes active automatically
- [ ] `getAllDomainNames()` lists all registered domains
- [ ] `unregister()` removes domains and handles active domain gracefully
- [ ] DOMAIN_CONFIG InjectionToken is exported
- [ ] TypeScript compilation succeeds (after Section 305)
- [ ] JSDoc comments document all public methods

---

## Next Step

Proceed to `305-domain-config-validator.md` to create the validation service that the registry depends on.