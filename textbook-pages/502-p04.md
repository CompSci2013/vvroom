---

### Step 502.2: Update the Barrel File

Update `src/app/domains/automobile/adapters/index.ts`:

```typescript
// src/app/domains/automobile/adapters/index.ts
// VERSION 2 (Section 502) - Added URL mapper

export * from './automobile-url-mapper';

// API Adapter (Section 503)
// export * from './automobile-api.adapter';

// Cache Key Builder (Section 503)
// export * from './automobile-cache-key.builder';
```

---

## Verification

### 1. Check File Exists

```bash
$ ls -la src/app/domains/automobile/adapters/automobile-url-mapper.ts
```

### 2. TypeScript Compilation Check

```bash
$ npx tsc --noEmit src/app/domains/automobile/adapters/automobile-url-mapper.ts
```

### 3. Test Mapping

```typescript
import { AutomobileUrlMapper } from '@app/domains/automobile/adapters';
import { AutoSearchFilters } from '@app/domains/automobile/models';

const mapper = new AutomobileUrlMapper();

// Test toUrlParams
const filters = new AutoSearchFilters({
  manufacturer: 'Toyota',
  yearMin: 2020,
  yearMax: 2024,
  bodyClass: ['Sedan', 'SUV'],
  page: 1,
  size: 20
});

const params = mapper.toUrlParams(filters);
console.log('URL params:', params);
// { manufacturer: 'Toyota', yearMin: '2020', yearMax: '2024',
//   bodyClass: 'Sedan,SUV', page: '1', size: '20' }

// Test fromUrlParams
const urlParams = {
  manufacturer: 'Honda',
  yearMin: '2022',
  page: '2'
};

const parsedFilters = mapper.fromUrlParams(urlParams);
console.log('Parsed filters:', parsedFilters);
// AutoSearchFilters { manufacturer: 'Honda', yearMin: 2022, page: 2 }

// Test highlight extraction
const highlightParams = {
  manufacturer: 'Ford',
  h_yearMin: '2023',
  h_yearMax: '2024'
};

const highlights = mapper.extractHighlights(highlightParams);
console.log('Highlights:', highlights);
// { yearMin: '2023', yearMax: '2024' }
```

---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| Numbers come back as strings | Missing `parseNumber()` call | Use `parseNumber()` for numeric fields |
| Array comes back as string | Missing comma split | Check for comma and split |
| Highlight params not extracted | Wrong prefix check | Ensure `h_` prefix matching |
| Empty string in URL | Null/undefined not filtered | Check for null/undefined before adding |