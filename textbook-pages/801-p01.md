# 801: Base Chart Component

**Status:** Planning
**Depends On:** 201-domain-config-interface, 301-url-state-service, 306-resource-management-service, 651-654 (Chart Data Sources)
**Blocks:** 804-statistics-panel-component

---

## Learning Objectives

After completing this section, you will:
- Understand the data source pattern for transforming domain data into chart-ready formats
- Know how to integrate Plotly.js with Angular's change detection strategy
- Be able to implement reusable chart containers that work with any domain configuration

---

## Objective

Build a domain-agnostic chart component that renders Plotly.js visualizations based on pluggable data sources. This component accepts any `ChartDataSource` implementation and handles all chart lifecycle concerns: rendering, resizing, event handling, and cleanup.

---

## Why

Charts are a critical feature for data discovery applications. However, each domain (automobiles, agriculture, etc.) has different data structures and visualization needs. Rather than creating domain-specific chart components, we build one generic container that works with any data.

The **Data Source Pattern** separates concerns:
1. **BaseChartComponent** handles Plotly.js integration, DOM management, and events
2. **ChartDataSource** implementations handle domain-specific data transformation

This pattern is the Phase 8 "aha moment": **Generic components + specific configuration = infinite reusability**.

### Angular Style Guide References

- [Style 03-01](https://angular.io/guide/styleguide#style-03-01): Use single responsibility principle
- [Style 05-15](https://angular.io/guide/styleguide#style-05-15): Provide a selector prefix

### URL-First Architecture Reference

When a user clicks on a chart element (e.g., a bar for "Toyota"), the click event flows through the data source's `toUrlParams()` method, which converts the click into URL query parameters. This maintains our URL-First principle: all state changes flow through URL updates.

---

## What

### Step 801.1: Install Plotly.js Dependency

First, install the Plotly.js minified distribution:

```bash
$ cd ~/projects/vvroom
$ npm install plotly.js-dist-min --save
```

Verify installation:

```bash
$ grep "plotly" package.json
    "plotly.js-dist-min": "^2.29.1",
```