### 3. `distinctUntilChanged` — Skip Duplicates

**Problem:** The URL might "change" to the same value (user clicks same link twice). You don't want to re-fetch identical data.

```typescript
import { distinctUntilChanged } from 'rxjs/operators';

this.filters$ = this.route.queryParams.pipe(
  map(params => this.urlMapper.fromUrlParams(params)),
  distinctUntilChanged((a, b) => JSON.stringify(a) === JSON.stringify(b))
);
```

**How it works:**

```
input:    --A--A--B--B--A-->
output:   --A-----B-----A-->

Consecutive duplicates are skipped.
```

**The comparator function:** For objects, you need a custom comparator because `{a:1} !== {a:1}` (different object references). The example uses `JSON.stringify` for deep comparison. For large objects, consider a more efficient comparison.

**When to use:** Preventing unnecessary work when values haven't actually changed.

### 4. `shareReplay(1)` — Share and Cache

**Problem:** Multiple components subscribe to `filters$`. Without sharing, each subscription triggers a new execution of the Observable chain.

```typescript
import { shareReplay } from 'rxjs/operators';

// Without shareReplay: each subscriber gets a separate stream
// URL parsing happens multiple times

// With shareReplay(1): all subscribers share one stream
this.filters$ = this.route.queryParams.pipe(
  map(params => this.urlMapper.fromUrlParams(params)),
  distinctUntilChanged((a, b) => JSON.stringify(a) === JSON.stringify(b)),
  shareReplay(1)  // Share with all subscribers, replay last value
);
```

**How it works:**

```
Without shareReplay:
  Subscriber A: queryParams → map → distinctUntilChanged
  Subscriber B: queryParams → map → distinctUntilChanged  (separate execution)

With shareReplay(1):
  Subscriber A ─┐
                ├─ queryParams → map → distinctUntilChanged (shared)
  Subscriber B ─┘
```

**The `1` parameter:** Replay the last 1 value to new subscribers. This means late subscribers immediately get the current value without waiting for the next emission.

**When to use:** Any Observable that multiple components will subscribe to.