### 7. Verify Console Logging

When an error is caught, check the browser console for grouped log output:

```
▼ [Global Error Handler] 2024-02-09T12:00:00.000Z
  Error caught by global handler: Error: Test error
  Stack trace: Error: Test error
    at Component.ngOnInit (component.ts:15)
    ...
  Error type: Error
  Location: {url: "http://localhost:4200/discover", route: "/discover"}
```

---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| Circular dependency error | ErrorHandler created too early | Use `Injector.get()` instead of constructor injection |
| No toast appears | ErrorNotificationService not provided | Ensure MessageService is in app.module.ts providers |
| Error handled twice | HTTP interceptor + global handler | Check if error already formatted (has `.code` property) |
| Console shows "NullInjectorError" | Service not available | Ensure all dependencies are provided |
| Chunk load error not detected | Message pattern changed | Update `isChunkLoadError()` detection patterns |

---

## Key Takeaways

1. **Global error handling catches everything** — Even errors developers forgot to handle
2. **Lazy injection avoids circular dependencies** — Use `Injector.get()` for early-loaded services
3. **Error categorization enables appropriate responses** — Chunk errors need refresh, promise errors need retry

---

## Acceptance Criteria

- [ ] `src/app/framework/services/global-error.handler.ts` exists
- [ ] Handler extends Angular's `ErrorHandler` interface
- [ ] `handleError()` method catches all unhandled errors
- [ ] HTTP errors detected and formatted
- [ ] Chunk load errors show sticky refresh prompt
- [ ] Promise rejections handled with 7-second display
- [ ] Generic errors show sticky toast
- [ ] Console logging includes stack trace and location
- [ ] Lazy injection via `Injector.get()` to avoid circular deps
- [ ] Handler registered with `provide: ErrorHandler` in app.module.ts
- [ ] TypeScript compilation succeeds
- [ ] JSDoc comments document all methods