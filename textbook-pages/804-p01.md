# 804: Statistics Panel Component

**Status:** Planning
**Depends On:** 801-base-chart-component, 306-resource-management-service, 651-654 (Chart Data Sources)
**Blocks:** 904-automobile-discover

---

## Learning Objectives

After completing this section, you will:
- Understand how to compose multiple chart components into a single panel
- Know how to implement drag-and-drop reordering with Angular CDK
- Be able to coordinate chart clicks with URL state updates

---

## Objective

Build a statistics panel component that renders multiple charts in a draggable grid layout. This component composes `BaseChartComponent` instances and handles chart ordering, pop-out functionality, and click event coordination.

---

## Why

Data discovery applications often display multiple charts showing different statistical views: distributions by manufacturer, year, body type, etc. Rather than hard-coding chart layouts, we build a **Statistics Panel** that:

1. Accepts an array of chart IDs or reads from `DomainConfig.chartDataSources`
2. Renders each chart using `BaseChartComponent`
3. Allows users to reorder charts via drag-and-drop
4. Coordinates click events with URL state

The Angular CDK (Component Dev Kit) provides drag-and-drop functionality without requiring a full component library.

### Angular Style Guide References

- [Style 03-02](https://angular.io/guide/styleguide#style-03-02): Use delegation over inheritance
- [Style 05-02](https://angular.io/guide/styleguide#style-05-02): Use input properties for data binding

### URL-First Architecture Reference

When a user clicks on a chart element (e.g., a bar representing "Toyota"), the click flows:
1. `BaseChartComponent` emits `chartClick` event
2. `StatisticsPanelComponent` receives the event and gets the data source
3. Data source's `toUrlParams()` converts the click to URL parameters
4. URL state is updated, triggering new API requests

This maintains our URL-First principle while keeping chart interaction logic in data sources.

---

## What

### Step 804.1: Install Angular CDK

The Angular CDK provides drag-and-drop functionality:

```bash
$ cd ~/projects/vvroom
$ npm install @angular/cdk --save
```

Verify installation:

```bash
$ grep "@angular/cdk" package.json
    "@angular/cdk": "^13.3.0",
```