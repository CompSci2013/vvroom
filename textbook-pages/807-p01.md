# 807: Column Manager Component

**Status:** Planning
**Depends On:** 204-table-config-interface, 803-basic-results-table
**Blocks:** 904-automobile-discover

---

## Learning Objectives

After completing this section, you will:
- Understand how to manage table column visibility with user preferences
- Know how to persist column settings to localStorage
- Be able to implement drag-and-drop column reordering

---

## Objective

Build a column manager component that allows users to show/hide and reorder table columns. The component displays a list of available columns with checkboxes and drag handles, persists preferences to localStorage, and emits column configuration changes to parent components.

---

## Why

Data tables often have many columns, but users typically only need a subset for their current task. The **Column Manager Component** provides:

1. **Column visibility toggle**: Show/hide columns without losing data
2. **Column reordering**: Drag columns to customize display order
3. **Persistence**: Settings survive browser refresh
4. **Domain-agnostic**: Works with any table configuration

This enhances user experience by letting each user customize their view.

### Angular Style Guide References

- [Style 03-01](https://angular.io/guide/styleguide#style-03-01): Use single responsibility principle
- [Style 05-02](https://angular.io/guide/styleguide#style-05-02): Use input properties for data binding

### LocalStorage Persistence

Column preferences are stored in localStorage using a domain-specific key:
```
vvroom_columns_{domainId}
```

This ensures settings persist across sessions and don't conflict between domains.

---

## What

### Step 807.1: Create the Column Manager Interface

Create the file `src/app/framework/components/column-manager/column-manager.interface.ts`:

```typescript
// src/app/framework/components/column-manager/column-manager.interface.ts
// VERSION 1 (Section 807) - Column manager types

import { TableColumn } from '../../models/table-config.interface';

/**
 * Column visibility state
 */
export interface ColumnState {
  /**
   * Column field name (unique identifier)
   */
  field: string;

  /**
   * Whether column is visible
   */
  visible: boolean;

  /**
   * Display order (lower = earlier)
   */
  order: number;
}

/**
 * Column manager output event
 */
export interface ColumnConfigEvent {
  /**
   * Visible columns in display order
   */
  visibleColumns: TableColumn[];

  /**
   * All column states (for persistence)
   */
  allColumnStates: ColumnState[];
}
```