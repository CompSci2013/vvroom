---

## Verification

### 1. Check File Exists

```bash
$ ls -la src/app/framework/models/popout.interface.ts
```

Expected output shows the file exists.

### 2. TypeScript Compilation Check

```bash
$ cd ~/projects/vvroom
$ npx tsc --noEmit src/app/framework/models/popout.interface.ts
```

Expected: No output (no compilation errors).

### 3. Verify Exports

```bash
$ grep "^export" src/app/framework/models/popout.interface.ts
```

Expected output:

```
export interface PopOutMessage<T = any> {
export enum PopOutMessageType {
export interface PickerSelectionPayload {
export interface PopOutWindowRef {
export interface PopOutWindowFeatures {
export interface PopOutRouteParams {
export interface PopOutContext {
export function buildWindowFeatures(features: PopOutWindowFeatures): string {
export function parsePopOutRoute(url: string): PopOutContext | null {
export function buildPopOutUrl(
export function createPopOutMessage<T>(
export const CHART_POPOUT_FEATURES: PopOutWindowFeatures = {
export const PICKER_POPOUT_FEATURES: PopOutWindowFeatures = {
export const FILTER_POPOUT_FEATURES: PopOutWindowFeatures = {
export const POPOUT_CHANNEL_PREFIX = 'vvroom-popout';
export function getPopOutChannelName(panelId: string): string {
```

### 4. Verify Barrel Export

```bash
$ grep "popout" src/app/framework/models/index.ts
```

Expected output:

```
export * from './popout.interface';
```

---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| BroadcastChannel not defined | Older browser | Check browser compatibility or use polyfill |
| Pop-out shows blank | Route not configured | Add pop-out routes to app.routes.ts |
| Messages not received | Wrong channel name | Verify both windows use same channel name |
| Pop-out loses state on refresh | URL not preserved | Include query params in pop-out URL |
| Window features ignored | Browser restrictions | Some browsers limit window.open() features |

---

## Key Takeaways

1. **BroadcastChannel enables cross-window communication** — Same-origin windows can send messages
2. **The parent owns URL state** — Pop-outs request changes, parent applies them
3. **Message types create a protocol** — Typed messages ensure consistent communication