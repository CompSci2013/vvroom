---

### Step 308.2: Update Popout Interface

Ensure `src/app/framework/models/popout.interface.ts` includes necessary types:

```typescript
// Add to src/app/framework/models/popout.interface.ts if not present
// VERSION 2 (Section 308) - Added window reference types

/**
 * Pop-out window features configuration
 */
export interface PopOutWindowFeatures {
  width: number;
  height: number;
  left: number;
  top: number;
  resizable: boolean;
  scrollbars: boolean;
  menubar?: boolean;
  toolbar?: boolean;
  location?: boolean;
  status?: boolean;
}

/**
 * Reference to an open pop-out window
 */
export interface PopOutWindowRef {
  /** Window object */
  window: Window;
  /** BroadcastChannel for communication */
  channel: BroadcastChannel;
  /** Interval ID for close detection */
  checkInterval: number;
  /** Panel identifier */
  panelId: string;
  /** Panel type */
  panelType: string;
}

/**
 * Build window.open() features string from options
 *
 * @param features - Window features configuration
 * @returns Features string for window.open()
 */
export function buildWindowFeatures(features: PopOutWindowFeatures): string {
  const parts: string[] = [
    `width=${features.width}`,
    `height=${features.height}`,
    `left=${features.left}`,
    `top=${features.top}`,
    `resizable=${features.resizable ? 'yes' : 'no'}`,
    `scrollbars=${features.scrollbars ? 'yes' : 'no'}`
  ];

  if (features.menubar !== undefined) {
    parts.push(`menubar=${features.menubar ? 'yes' : 'no'}`);
  }
  if (features.toolbar !== undefined) {
    parts.push(`toolbar=${features.toolbar ? 'yes' : 'no'}`);
  }
  if (features.location !== undefined) {
    parts.push(`location=${features.location ? 'yes' : 'no'}`);
  }
  if (features.status !== undefined) {
    parts.push(`status=${features.status ? 'yes' : 'no'}`);
  }

  return parts.join(',');
}
```

---

### Step 308.3: Update the Barrel File

Update `src/app/framework/services/index.ts`:

```typescript
// src/app/framework/services/index.ts
// VERSION 7 (Section 308) - Added PopOutManagerService

export * from './url-state.service';
export * from './api.service';
export * from './request-coordinator.service';
export * from './domain-config-registry.service';
export * from './domain-config-validator.service';
export * from './popout-context.service';
export * from './popout-manager.service';
export * from './resource-management.service';
```