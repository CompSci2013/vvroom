---

### Step 605.5: Comparing Query Control Filters vs Highlight Filters

**Document 604 (Query Control Filters):**
- Narrow the dataset
- Remove non-matching rows
- URL params: `manufacturer`, `model`, `yearMin`, etc.

**Document 605 (Highlight Filters):**
- Segment the visualization
- Keep all rows, color matching rows differently
- URL params: `h_manufacturer`, `h_model`, `h_yearMin`, etc.

**They share:**
- Same structure (FilterDefinition interface)
- Same options endpoints
- Same options transformers
- Same UI dialogs (QueryControlComponent handles both)

**They differ:**
- URL parameter names (with/without `h_` prefix)
- API behavior (filter vs segment)
- Visual effect (hide vs color)

---

## Verification

### 1. Verify File Created

```bash
$ ls -la src/app/domain-config/automobile/configs/automobile.highlight-filters.ts
```

Expected: File exists.

### 2. Verify TypeScript Compilation

```bash
$ cd ~/projects/vvroom
$ npx tsc --noEmit src/app/domain-config/automobile/configs/automobile.highlight-filters.ts
```

Expected: No compilation errors.

### 3. Verify Filter Count

```bash
$ grep -c "field:" src/app/domain-config/automobile/configs/automobile.highlight-filters.ts
```

Expected: `4` (manufacturer, modelCombos, bodyClass, yearMin)

### 4. Verify h_ Prefix

```bash
$ grep "h_" src/app/domain-config/automobile/configs/automobile.highlight-filters.ts | wc -l
```

Expected: At least 6 occurrences (h_manufacturer, h_modelCombos, h_bodyClass, h_yearMin, h_yearMax in code and comments)

---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| Highlights not appearing in charts | API not returning highlighted field | Verify API supports h_ parameters |
| Same color for highlighted and non-highlighted | Chart data source not using highlighted field | Update chart data source to check for segmented data |
| Filter and highlight interfering | Using wrong prefix | Filter params no prefix, highlight params h_ prefix |
| "Cannot find 'HighlightFilters'" | Model not imported | Ensure automobile.filters.ts exports HighlightFilters |