# 313: HTTP Error Interceptor

**Status:** Complete
**Depends On:** 302-api-service, 312-error-notification-service
**Blocks:** 314-global-error-handler

---

## Learning Objectives

After completing this section, you will:
- Understand how Angular HTTP interceptors work
- Know how to implement automatic retry for transient errors
- Recognize the importance of consistent error formatting
- Be able to create user-friendly error messages from HTTP status codes

---

## Objective

Create the `HttpErrorInterceptor` that provides global error handling for all HTTP requests. This interceptor automatically retries transient errors, formats error responses consistently, and logs errors for debugging.

---

## Why

Every HTTP request can fail. Without centralized handling, each component must:
- Catch errors in its subscription
- Determine the error type
- Format user-friendly messages
- Log for debugging
- Decide whether to retry

This leads to duplicated logic and inconsistent error handling.

### The Interceptor Pattern

Angular's HTTP interceptor pattern allows you to intercept and modify HTTP requests and responses globally. For error handling:

```
Request → Interceptor → HTTP → Server Response
                              ↓
                         Error? → Retry? → Format → Component
```

### Automatic Retry for Transient Errors

Some errors are **transient** — they succeed on retry:

| Status Code | Meaning | Retryable? |
|-------------|---------|------------|
| 429 | Too Many Requests | Yes — wait and retry |
| 500 | Internal Server Error | Maybe — server might recover |
| 502 | Bad Gateway | Yes — proxy might recover |
| 503 | Service Unavailable | Yes — server restarting |
| 504 | Gateway Timeout | Yes — might just be slow |
| 400 | Bad Request | No — client error won't change |
| 401 | Unauthorized | No — need authentication |
| 404 | Not Found | No — resource doesn't exist |

The interceptor automatically retries for status codes 429, 500, 502, 503, 504 up to 2 times before giving up.