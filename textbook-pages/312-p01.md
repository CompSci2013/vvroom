# 312: Error Notification Service

**Status:** Complete
**Depends On:** 201-209 (Framework Models)
**Blocks:** 313-http-error-interceptor, 314-global-error-handler

---

## Learning Objectives

After completing this section, you will:
- Understand the need for centralized error notification
- Know how to deduplicate error messages to prevent notification spam
- Recognize the role of error categorization in user-facing messaging
- Be able to implement toast notifications using PrimeNG MessageService

---

## Objective

Create the `ErrorNotificationService` that provides centralized error notification using PrimeNG Toast. This service handles error deduplication, categorization, and consistent display for all user-facing error messages.

---

## Why

Applications generate errors from multiple sources:
- HTTP requests failing
- Validation errors from form inputs
- Component lifecycle errors
- Unhandled promise rejections

Without centralized error handling, each component handles errors differently. Users see inconsistent messages, and developers repeat the same error-handling logic.

### The Problem: Notification Spam

When errors occur, they often repeat rapidly:
- Network failures cause multiple retries
- Polling requests all fail simultaneously
- Component re-renders trigger the same error

Showing every error individually creates **notification spam** that overwhelms users.

### The Solution: Deduplication

The ErrorNotificationService maintains a short-term memory of recent errors. If the same error (same category + summary + detail) occurs within a deduplication window (3 seconds), subsequent errors are suppressed.

```typescript
// First error: Shows toast
showError('Connection Error', 'Unable to reach server');

// Same error within 3 seconds: Suppressed
showError('Connection Error', 'Unable to reach server'); // No toast

// After 3 seconds: Shows toast again
showError('Connection Error', 'Unable to reach server'); // Toast shown
```

### Error Categories

Errors are categorized by source and type:

| Category | Description | Default Severity |
|----------|-------------|------------------|
| `NETWORK` | Connection issues, timeouts | error |
| `VALIDATION` | Invalid input, business rules | warn |
| `AUTHORIZATION` | 401/403 errors | warn |
| `SERVER` | 5xx status codes | error |
| `CLIENT` | JavaScript errors | error |
| `APPLICATION` | Business logic errors | error |
| `UNKNOWN` | Uncategorized | error |

Categories drive two behaviors:
1. **Visual severity** — Maps to PrimeNG toast colors (error=red, warn=yellow)
2. **User-friendly summaries** — "Connection Error" instead of "NETWORK"