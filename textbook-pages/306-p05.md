---

### Step 306.4: Update the Barrel File

Update `src/app/framework/services/index.ts`:

```typescript
// src/app/framework/services/index.ts
// VERSION 6 (Section 306) - Added ResourceManagementService, PopOutContextService

export * from './url-state.service';
export * from './api.service';
export * from './request-coordinator.service';
export * from './domain-config-registry.service';
export * from './domain-config-validator.service';
export * from './popout-context.service';
export * from './resource-management.service';
```

---

## Phase 3A Milestone: Demo Component

After completing Section 306, create a temporary demo component that displays URL state changes.

Create `src/app/features/demo/url-state-demo.component.ts`:

```typescript
// src/app/features/demo/url-state-demo.component.ts
// TEMPORARY - Remove after verification

import { Component, OnInit, OnDestroy } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { UrlStateService } from '../../framework/services';

@Component({
  selector: 'app-url-state-demo',
  template: `
    <div style="padding: 20px; font-family: monospace;">
      <h2>URL State Demo</h2>

      <div style="margin: 20px 0;">
        <h3>Current URL Params:</h3>
        <pre>{{ currentParams | json }}</pre>
      </div>

      <div style="margin: 20px 0;">
        <h3>Test Controls:</h3>
        <button (click)="setManufacturer('Ford')">Set manufacturer=Ford</button>
        <button (click)="setManufacturer('Toyota')">Set manufacturer=Toyota</button>
        <button (click)="setPage(1)">Set page=1</button>
        <button (click)="setPage(2)">Set page=2</button>
        <button (click)="clearAll()">Clear All</button>
      </div>

      <div style="margin: 20px 0;">
        <h3>Log:</h3>
        <div *ngFor="let log of logs" style="font-size: 12px;">{{ log }}</div>
      </div>
    </div>
  `
})
export class UrlStateDemoComponent implements OnInit, OnDestroy {
  currentParams: any = {};
  logs: string[] = [];
  private destroy$ = new Subject<void>();

  constructor(private urlState: UrlStateService) {}

  ngOnInit(): void {
    this.urlState.watchParams()
      .pipe(takeUntil(this.destroy$))
      .subscribe(params => {
        this.currentParams = params;
        this.logs.unshift(`${new Date().toISOString()}: ${JSON.stringify(params)}`);
        if (this.logs.length > 10) this.logs.pop();
      });
  }

  setManufacturer(value: string): void {
    this.urlState.setParam('manufacturer', value);
  }

  setPage(value: number): void {
    this.urlState.setParam('page', value);
  }

  clearAll(): void {
    this.urlState.clearParams();
  }

  ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }
}
```

Add route for demo (temporary):

```typescript
// In app-routing.module.ts
{ path: 'demo', component: UrlStateDemoComponent }
```

Navigate to `/demo` and test the URL-First pattern in action.