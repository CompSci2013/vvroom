---

### Step 314.2: Update the Services Barrel File

Update `src/app/framework/services/index.ts`:

```typescript
// src/app/framework/services/index.ts
// VERSION 13 (Section 314) - Added GlobalErrorHandler

export * from './url-state.service';
export * from './api.service';
export * from './request-coordinator.service';
export * from './domain-config-registry.service';
export * from './domain-config-validator.service';
export * from './popout-context.service';
export * from './popout-manager.service';
export * from './user-preferences.service';
export * from './filter-options.service';
export * from './picker-config-registry.service';
export * from './resource-management.service';
export * from './error-notification.service';
export * from './http-error.interceptor';
export * from './global-error.handler';
```

---

### Step 314.3: Register the Global Error Handler

Update `src/app/app.module.ts` to register the handler:

```typescript
// src/app/app.module.ts (partial - add to existing)
import { ErrorHandler } from '@angular/core';
import { GlobalErrorHandler } from './framework/services';

@NgModule({
  // ...
  providers: [
    {
      provide: ErrorHandler,
      useClass: GlobalErrorHandler
    }
  ],
  // ...
})
export class AppModule { }
```

---

## Verification

### 1. Check File Exists

```bash
$ ls -la src/app/framework/services/global-error.handler.ts
```

### 2. TypeScript Compilation Check

```bash
$ npx tsc --noEmit src/app/framework/services/global-error.handler.ts
```

### 3. Build the Application

```bash
$ ng build
```

### 4. Test Unhandled Error

Add temporary code to throw an error:

```typescript
// In any component ngOnInit
ngOnInit(): void {
  // Uncomment to test - should show sticky toast
  // throw new Error('Test unhandled error');
}
```

### 5. Test Promise Rejection

```typescript
// In any component
ngOnInit(): void {
  // Uncomment to test - should show error toast
  // Promise.reject(new Error('Test promise rejection'));
}
```

### 6. Test Chunk Load Error

Simulate by modifying the error check temporarily, or:
1. Build the application
2. Delete a chunk file from dist
3. Navigate to the route that loads that chunk