# 604: Query Control Filters

**Status:** Planning
**Depends On:** 203-filter-definition-interface, 401-automobile-filters-model
**Blocks:** 607-domain-config-assembly

---

## Learning Objectives

After completing this section, you will:
- Understand how query control filters differ from simple filter definitions
- Know how to configure API endpoints for fetching filter options dynamically
- Recognize the pattern of transforming API responses into filter option formats

---

## Objective

Create the query control filter definitions that power the "Add Filter" dialog. These definitions tell the QueryControlComponent which filters are available, how to fetch their options, and how to serialize selections to the URL.

---

## Why

Document 601 defined filter definitions for the Query Panel (always-visible filter controls). But what about filters that users add on demand?

The QueryControlComponent provides a "chip-based" filter UI:

```
┌─────────────────────────────────────────────────────────────────┐
│ ┌─────────────┐ ┌──────────────────┐ ┌───────────────────┐      │
│ │ Ford    [x] │ │ Year: 2020-2023 │ │ Body: SUV, Truck │ [+]  │
│ └─────────────┘ └──────────────────┘ └───────────────────┘      │
└─────────────────────────────────────────────────────────────────┘
```

Clicking [+] opens a dialog:

```
┌─────────────────────────────────────────────────────────────────┐
│ Add Filter                                                 [X]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ○ Manufacturer                                                 │
│   ○ Model                                                        │
│   ○ Body Class                                                   │
│   ○ Year                                                         │
│   ○ Manufacturer & Model                                         │
│                                                                  │
├─────────────────────────────────────────────────────────────────┤
│                                        [Cancel]  [Next]          │
└─────────────────────────────────────────────────────────────────┘
```

Selecting "Manufacturer" and clicking "Next" opens the filter value dialog:

```
┌─────────────────────────────────────────────────────────────────┐
│ Select Manufacturer                                        [X]  │
│ Select one or more manufacturers to filter results.             │
├─────────────────────────────────────────────────────────────────┤
│ [Search: ________________________________________]               │
├─────────────────────────────────────────────────────────────────┤
│ [x] Ford                                                         │
│ [ ] Toyota                                                       │
│ [ ] Honda                                                        │
│ [ ] BMW                                                          │
│ [ ] Mercedes-Benz                                                │
├─────────────────────────────────────────────────────────────────┤
│                                      [Cancel]  [Apply Filter]    │
└─────────────────────────────────────────────────────────────────┘
```

Query control filters define:
1. Which filters appear in the "Add Filter" list
2. Where to fetch options for each filter
3. How to transform API responses into option format
4. How to serialize/deserialize values to/from URL