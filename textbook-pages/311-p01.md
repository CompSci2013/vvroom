# 311: Picker Config Registry

**Status:** Complete
**Depends On:** 205-picker-config-interface, 304-domain-config-registry
**Blocks:** Phase 8 (Framework Components - for picker dialogs)

---

## Learning Objectives

After completing this section, you will:
- Understand the Registry pattern for UI configurations
- Know how to decouple picker configuration from picker components
- Recognize the benefits of ID-based configuration lookup
- Be able to implement a type-safe configuration registry

---

## Objective

Create the `PickerConfigRegistry` that provides centralized management of picker configurations. Pickers are dialogs that let users select items (vehicles, manufacturers, models) from searchable tables.

---

## Why

Vvroom has multiple picker dialogs:
- **Vehicle Picker** — Select vehicles to compare
- **Manufacturer/Model Picker** — Filter by manufacturer and model
- **VIN Picker** — Find vehicles by VIN

Each picker needs configuration:
- Which columns to display
- How to fetch data
- Selection behavior (single vs multi-select)

### The Configuration Challenge

Where should picker configuration live?

**Option 1: In the picker component**
```typescript
@Component({...})
export class VehiclePickerComponent {
  columns = [
    { field: 'manufacturer', header: 'Manufacturer' },
    { field: 'model', header: 'Model' },
    // ...
  ];
}
```

Problem: Every picker duplicates configuration logic.

**Option 2: In the domain config**
```typescript
const AUTOMOBILE_CONFIG = {
  pickers: [VEHICLE_PICKER_CONFIG, MODEL_PICKER_CONFIG]
};
```

Problem: Components need to search arrays to find their config.

**Option 3: In a registry (our approach)**
```typescript
// At initialization
registry.register(VEHICLE_PICKER_CONFIG);

// In component
const config = registry.get('vehicle-picker');
```

Benefits:
- **O(1) lookup** by ID
- **Type-safe** retrieval with generics
- **Decoupled** from component hierarchy
- **Centralized** validation and management

### Usage Pattern

```typescript
// Domain config module registers pickers
@NgModule({...})
export class AutomobileDomainModule {
  constructor(private registry: PickerConfigRegistry) {
    registry.registerMultiple([
      VEHICLE_PICKER_CONFIG,
      MANUFACTURER_MODEL_PICKER_CONFIG
    ]);
  }
}

// Component looks up config by ID
@Component({...})
export class VehicleSelectionComponent {
  pickerConfig = this.registry.get<VehicleResult>('vehicle-picker');
}

// Or use ID in template
<app-base-picker [configId]="'vehicle-picker'"></app-base-picker>
```