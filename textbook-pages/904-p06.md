---

### Step 904.7: Create the Barrel Export

Create `src/app/features/popout/index.ts`:

```typescript
// src/app/features/popout/index.ts
// VERSION 1 (Section 904) - Barrel export for popout feature

export * from './popout.component';
export * from './popout.routes';
export * from './popout.module';
```

---

### Step 904.8: Add Global Pop-out Styles (Optional)

For consistent pop-out appearance, add these global styles to `src/styles.scss`:

```scss
// src/styles.scss
// ADD these styles for pop-out window support

// Pop-out window specific styles
.popout-html {
  height: 100%;
  margin: 0;
  padding: 0;
}

.popout-body {
  height: 100%;
  margin: 0;
  padding: 0;
  background: #f5f5f5;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
}
```

---

## Verification

### 1. Check File Structure

```bash
$ find src/app/features/popout -type f | sort
```

Expected output:

```
src/app/features/popout/index.ts
src/app/features/popout/popout.component.html
src/app/features/popout/popout.component.scss
src/app/features/popout/popout.component.ts
src/app/features/popout/popout.module.ts
src/app/features/popout/popout.routes.ts
```

### 2. Build the Application

```bash
$ ng build
```

Expected: Build succeeds.

### 3. Manual Pop-out Test (After Full Integration)

1. Navigate to `/automobiles/discover`
2. Click the pop-out button on any panel
3. A new browser window should open with URL like:
   `/popout/automobile-discover/chart-year/chart`
4. The component should render in the new window
5. State changes in main window should reflect in pop-out

### 4. Message Flow Test

In browser console of main window:
```javascript
// After pop-out is open, check BroadcastChannel
console.log('Pop-out should receive state updates');
```

In pop-out window console:
```javascript
// State should sync from main
console.log('Check that data appears');
```

---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| Pop-out window is blank | Router-outlet not finding child route | Verify route path matches child routes |
| "No provider for DOMAIN_CONFIG" | Domain not set before component loads | Ensure `domainRegistry.setActive()` called in ngOnInit |
| State not syncing | BroadcastChannel not initialized | Check `popOutContext.initializeAsPopOut()` called |
| Change detection not updating | OnPush strategy blocking updates | Call `cdr.detectChanges()` after state sync |
| Window.close() not working | Browser security restrictions | User must have opened the window (not blocked) |