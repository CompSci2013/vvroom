---

## Phase 3B Milestone: Pop-Out Demo

After completing Section 308, demonstrate pop-out communication:

1. Add temporary route for pop-out testing
2. Create a simple pop-out component
3. Verify communication works

```typescript
// Temporary demo component in main window
@Component({
  selector: 'app-popout-demo',
  template: `
    <h2>Pop-Out Demo</h2>
    <button (click)="openPopOut()">Open Pop-Out</button>
    <p>Popped out: {{ isPoppedOut }}</p>
    <div *ngFor="let log of logs">{{ log }}</div>
  `,
  providers: [PopOutManagerService]
})
export class PopOutDemoComponent implements OnInit {
  isPoppedOut = false;
  logs: string[] = [];

  constructor(private popOutManager: PopOutManagerService) {}

  ngOnInit(): void {
    this.popOutManager.initialize('demo-grid');

    this.popOutManager.closed$.subscribe(panelId => {
      this.logs.push(`Panel ${panelId} closed`);
      this.isPoppedOut = false;
    });
  }

  openPopOut(): void {
    this.isPoppedOut = this.popOutManager.openPopOut('demo-panel', 'demo');
    if (this.isPoppedOut) {
      this.logs.push('Pop-out opened');
    }
  }
}
```

---

## Verification

### 1. Check File Exists

```bash
$ ls -la src/app/framework/services/popout-manager.service.ts
```

### 2. TypeScript Compilation Check

```bash
$ npx tsc --noEmit src/app/framework/services/popout-manager.service.ts
```

### 3. Build the Application

```bash
$ ng build
```

---

## Common Problems

| Symptom | Cause | Solution |
|---------|-------|----------|
| Pop-up blocked | Browser blocking window.open() | User must allow pop-ups for site |
| `blocked$` emits | window.open() returned null | Check browser pop-up settings |
| Messages not received | Channel name mismatch | Verify `panel-{panelId}` format |
| Pop-out not detected as closed | Polling interval issue | Check checkInterval is set |
| State not updating in pop-out | broadcastState not called | Subscribe to state$ and broadcast |

---

## Key Takeaways

1. **Pop-outs are core functionality** — Users need multi-monitor workflows
2. **BroadcastChannel simplifies messaging** — No window reference management
3. **Polling detects window close** — No direct event available