# 302: API Service

**Status:** Complete
**Depends On:** 206-api-response-interface
**Blocks:** 303-request-coordinator, 310-filter-options-service, 502-api-adapter

---

## Learning Objectives

After completing this section, you will:
- Understand the role of a thin HTTP wrapper service in Angular applications
- Know how to serialize query parameters for HTTP requests
- Recognize when to handle errors at the service level vs. propagate them
- Be able to implement a domain-agnostic API service

---

## Objective

Create the `ApiService` that provides a type-safe, domain-agnostic wrapper around Angular's `HttpClient`. This service handles common patterns like query parameter serialization, error transformation, and response typing.

---

## Why

Every Angular application needs to make HTTP requests. The question is: *how do we structure these requests?*

**Option 1: Direct HttpClient Usage**

```typescript
// In component
this.http.get<Vehicle[]>('/api/vehicles', {
  params: new HttpParams()
    .set('page', '1')
    .set('size', '20')
    .set('manufacturer', 'Ford,Toyota')
}).subscribe(data => {
  // handle response
});
```

This works, but has problems:
- Verbose param building repeated everywhere
- Error handling duplicated in each call
- No consistent typing strategy
- Hard to add cross-cutting concerns (logging, auth)

**Option 2: Domain-Specific Services**

```typescript
// In VehicleService
getVehicles(filters: VehicleFilters): Observable<Vehicle[]> {
  return this.http.get<Vehicle[]>('/api/vehicles', {
    params: this.buildParams(filters)
  });
}
```

Better, but now every domain needs its own service with repeated boilerplate.

**Option 3: Thin HTTP Wrapper (Our Approach)**

```typescript
// ApiService provides thin wrapper
this.api.get<Vehicle>('/api/vehicles', { params: filters })

// Domain adapter uses it
this.api.get<Vehicle>(this.baseUrl + '/vehicles', { params: filters })
```

`ApiService` handles:
- Query parameter serialization (including arrays)
- Error transformation to consistent format
- Response typing

Domain adapters (created in Phase 5) use `ApiService` for domain-specific logic.