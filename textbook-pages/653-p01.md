# 653: Body Class Chart Source

**Status:** Planning
**Depends On:** 403-automobile-statistics-model, 652-year-chart-source
**Blocks:** 801-base-chart-component

---

## Learning Objectives

After completing this section, you will:
- Understand how to maintain unused code for future flexibility (color mappings)
- Know how to implement multi-value selection for categorical data
- Recognize patterns that repeat across chart sources and opportunities for refactoring

---

## Objective

Create the body class chart data source that transforms vehicle statistics into a Plotly.js bar chart showing distribution by body class (Sedan, SUV, Truck, etc.). This chart source handles categorical data and supports comma-separated multi-selection.

---

## Why

Body class represents a categorical dimension of vehicle data. Unlike manufacturers (which can number in the dozens) or years (which span decades), body classes form a small, fixed set of categories. This affects our design choices:

1. **Color scheme preparation** — Although we currently use uniform blue bars, we define a color mapping for potential future use (e.g., distinct colors per body class)
2. **Full display** — We show all body classes rather than limiting to "top 20" since the set is naturally small
3. **Descending count sort** — Like manufacturers, we sort by count (most common body classes first)

### Design Decision: Bar Chart Over Pie Chart

The original file comment mentions "pie chart," but the implementation uses a bar chart. Why?

- **Comparison accuracy** — Humans judge bar heights more accurately than pie slice angles
- **Highlight support** — Stacked bars work better than segmented pie slices for showing highlighted vs. non-highlighted data
- **Consistency** — Matches the visual style of manufacturer and year charts

### URL-First Architecture Reference

Body class filtering uses comma-separated values for OR logic: `bodyClass=Sedan,SUV` matches vehicles that are either Sedans OR SUVs. This supports intuitive multi-selection where clicking multiple bars expands rather than narrows the result set.