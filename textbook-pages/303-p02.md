### Visual Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          Request Comes In                                    │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Layer 1: Response Cache                                                      │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │  Is there a cached response for this key that hasn't expired?           │ │
│ │  YES → Return cached response immediately (no HTTP)                     │ │
│ │  NO  → Proceed to Layer 2                                               │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Layer 2: In-Flight Deduplication                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │  Is there already a request in progress for this key?                   │ │
│ │  YES → Return the existing observable (share it)                        │ │
│ │  NO  → Proceed to Layer 3                                               │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Layer 3: HTTP Request with Retry                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │  Execute HTTP request                                                    │ │
│ │  On success → Cache response → Return data                              │ │
│ │  On failure → Retry with exponential backoff                            │ │
│ │  After N failures → Propagate error                                     │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
```