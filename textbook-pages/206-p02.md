```typescript
// src/app/framework/models/api-response.interface.ts
// VERSION 1 (Section 206) - Standardized API response format

/**
 * Generic API response interface for paginated endpoints
 *
 * This interface defines the standard response format for all paginated
 * API endpoints in the vvroom application. Both the frontend and backend
 * agree on this format, enabling type-safe data handling.
 *
 * @template TData - The type of data items in the results array
 *
 * @example
 * ```typescript
 * interface Vehicle {
 *   vin: string;
 *   manufacturer: string;
 *   model: string;
 *   year: number;
 * }
 *
 * // Typed HTTP request
 * this.http.get<ApiResponse<Vehicle>>('/api/vehicles', { params })
 *   .subscribe(response => {
 *     console.log(response.results);     // Vehicle[]
 *     console.log(response.total);       // number
 *     console.log(response.page);        // number
 *     console.log(response.totalPages);  // number
 *   });
 * ```
 */
export interface ApiResponse<TData> {
  /**
   * Array of result items for the current page
   */
  results: TData[];

  /**
   * Total number of items across all pages
   * Used for pagination display: "Showing 1-20 of 1,234 results"
   */
  total: number;

  /**
   * Current page number (1-indexed)
   * Page 1 is the first page
   */
  page: number;

  /**
   * Number of items per page
   * Matches the `size` query parameter
   */
  size: number;

  /**
   * Total number of pages
   * Computed as: Math.ceil(total / size)
   */
  totalPages: number;

  /**
   * Optional statistics data (domain-specific)
   * Contains aggregations, counts, and other computed data
   *
   * @example
   * statistics: {
   *   manufacturerCounts: { Ford: 150, Toyota: 120, Honda: 89 },
   *   yearRange: { min: 1990, max: 2024 },
   *   totalVins: 1234
   * }
   */
  statistics?: any;
}

/**
 * Generic error response from API
 *
 * Defines the standard error format returned by the API server.
 * All API errors follow this structure for consistent error handling.
 *
 * @example
 * ```json
 * {
 *   "success": false,
 *   "error": {
 *     "code": "VALIDATION_ERROR",
 *     "message": "Invalid year range: min cannot exceed max",
 *     "details": {
 *       "field": "yearMin",
 *       "value": 2025,
 *       "constraint": "must be less than or equal to yearMax"
 *     }
 *   }
 * }
 * ```
 */
export interface ApiErrorResponse {
  /**
   * Success flag (always false for errors)
   */
  success: false;

  /**
   * Error details
   */
  error: {
    /**
     * Error code for programmatic handling
     * @example 'VALIDATION_ERROR', 'NOT_FOUND', 'UNAUTHORIZED'
     */
    code: string;

    /**
     * Human-readable error message
     * Suitable for display to users
     */
    message: string;

    /**
     * Optional additional error details
     * Contains field-specific validation info, etc.
     */
    details?: Record<string, any>;
  };
}

/**
 * Generic success response wrapper
 *
 * For non-paginated endpoints that return a single object or operation result.
 *
 * @template TData - The type of the response data
 *
 * @example
 * ```typescript
 * // Create vehicle response
 * interface CreateVehicleResult {
 *   vin: string;
 *   created: boolean;
 * }
 *
 * this.http.post<ApiSuccessResponse<CreateVehicleResult>>('/api/vehicles', vehicle)
 *   .subscribe(response => {
 *     if (response.success) {
 *       console.log('Created:', response.data.vin);
 *     }
 *   });
 * ```
 */
export interface ApiSuccessResponse<TData> {
  /**
   * Success flag (always true for successful responses)
   */
  success: true;

  /**
   * Response data
   */
  data: TData;
}

/**
 * Standard API response type (success or error)
 *
 * Union type for endpoints that may return either success or error.
 * Use type guards to narrow the type:
 *
 * @example
 * ```typescript
 * function handleResponse(response: StandardApiResponse<Vehicle>) {
 *   if (response.success) {
 *     // TypeScript knows response.data exists here
 *     console.log(response.data);
 *   } else {
 *     // TypeScript knows response.error exists here
 *     console.error(response.error.message);
 *   }
 * }
 * ```
 */
export type StandardApiResponse<TData> = ApiSuccessResponse<TData> | ApiErrorResponse;

/**
 * Type guard: Check if response is a success response
 *
 * @param response - API response to check
 * @returns True if response is a success response
 *
 * @example
 * ```typescript
 * const response = await firstValueFrom(http.get<StandardApiResponse<Vehicle>>(url));
 * if (isSuccessResponse(response)) {
 *   console.log(response.data); // TypeScript knows data exists
 * }
 * ```
 */
export function isSuccessResponse<T>(
  response: StandardApiResponse<T>
): response is ApiSuccessResponse<T> {
  return response.success === true;
}

/**
 * Type guard: Check if response is an error response
 *
 * @param response - API response to check
 * @returns True if response is an error response
 *
 * @example
 * ```typescript
 * const response = await firstValueFrom(http.get<StandardApiResponse<Vehicle>>(url));
 * if (isErrorResponse(response)) {
 *   console.error(response.error.message); // TypeScript knows error exists
 * }
 * ```
 */
export function isErrorResponse<T>(
  response: StandardApiResponse<T>
): response is ApiErrorResponse {
  return response.success === false;
}

/**
 * Empty paginated response
 *
 * Utility constant for initial state or empty results.
 *
 * @example
 * ```typescript
 * const [response, setResponse] = useState<ApiResponse<Vehicle>>(EMPTY_API_RESPONSE);
 * ```
 */
export const EMPTY_API_RESPONSE: ApiResponse<never> = {
  results: [],
  total: 0,
  page: 1,
  size: 20,
  totalPages: 0
};

/**
 * Create an empty ApiResponse with specified type
 *
 * @template T - The data type
 * @param size - Page size (default: 20)
 * @returns Empty ApiResponse
 *
 * @example
 * ```typescript
 * const initialState: ApiResponse<Vehicle> = createEmptyResponse(25);
 * ```
 */
export function createEmptyResponse<T>(size: number = 20): ApiResponse<T> {
  return {
    results: [],
    total: 0,
    page: 1,
    size,
    totalPages: 0
  };
}

/**
 * Calculate total pages from total and page size
 *
 * @param total - Total number of items
 * @param size - Page size
 * @returns Total number of pages
 *
 * @example
 * ```typescript
 * calculateTotalPages(100, 20); // Returns 5
 * calculateTotalPages(101, 20); // Returns 6
 * calculateTotalPages(0, 20);   // Returns 0
 * ```
 */
export function calculateTotalPages(total: number, size: number): number {
  if (total <= 0 || size <= 0) {
    return 0;
  }
  return Math.ceil(total / size);
}

/**
 * Check if there are more pages after the current page
 *
 * @param page - Current page (1-indexed)
 * @param totalPages - Total number of pages
 * @returns True if there are more pages
 */
export function hasNextPage(page: number, totalPages: number): boolean {
  return page < totalPages;
}

/**
 * Check if there are previous pages before the current page
 *
 * @param page - Current page (1-indexed)
 * @returns True if there are previous pages
 */
export function hasPreviousPage(page: number): boolean {
  return page > 1;
}
```