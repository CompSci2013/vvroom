### Angular Router Integration

The Angular Router provides `ActivatedRoute.queryParams` for reading query parameters. However, there's a subtlety: `ActivatedRoute` is scoped to the route hierarchy. A root-level service doesn't receive query param updates from child routes.

`UrlStateService` solves this by:
1. Using `Router.events` to watch all navigation events globally
2. Parsing query parameters from the router's URL directly
3. Emitting changes through a `BehaviorSubject` that any component can subscribe to

### RxJS Patterns Used

This service uses patterns from Interlude B (Section 250):

| Pattern | Usage |
|---------|-------|
| `BehaviorSubject` | Holds current URL params with synchronous access via `.value` |
| `filter()` | Only process `NavigationEnd` events |
| `map()` | Transform navigation events to query param objects |
| `distinctUntilChanged()` | Prevent duplicate emissions for identical params |

---

## What

### Step 301.1: Create the Services Directory Index

Before creating individual service files, create a barrel export file that will aggregate all service exports.

Create the file `src/app/framework/services/index.ts`:

```typescript
// src/app/framework/services/index.ts
// VERSION 1 (Section 301) - Barrel file for framework services

// This barrel file exports all framework services.
// Import from '@app/framework/services' instead of individual files.

export * from './url-state.service';
```

Delete the `.gitkeep` file since the directory now has real content:

```bash
$ rm src/app/framework/services/.gitkeep
```

---

### Step 301.2: Create the URL State Service

Create the file `src/app/framework/services/url-state.service.ts`: