# 652: Year Chart Source

**Status:** Planning
**Depends On:** 403-automobile-statistics-model, 651-manufacturer-chart-source
**Blocks:** 801-base-chart-component

---

## Learning Objectives

After completing this section, you will:
- Understand how to handle time-series data in chart transformations
- Know how to implement range selection for year-based filtering
- Be able to convert multi-value selections into URL parameters

---

## Objective

Create the year chart data source that transforms vehicle statistics into a Plotly.js bar chart showing vehicle distribution over time. This chart source handles year-based data and supports both single-year clicks and range selections.

---

## Why

Time-series data presents unique visualization and interaction challenges:

1. **Chronological ordering** — Years must be sorted ascending (oldest to newest), unlike other charts that sort by count
2. **Range selection** — Users often want to filter by a range of years, not just a single year
3. **Different URL parameter format** — Year ranges require two parameters (`yearMin` and `yearMax`) instead of one

The year chart demonstrates how a single abstract interface (`ChartDataSource`) can accommodate domain-specific requirements through concrete implementations.

### Design Decision: Bar Chart for Years

While line charts are common for time series, we use a bar chart for years because:

- **Discrete values** — Vehicle model years are discrete integers, not continuous data
- **Highlight support** — Stacked bars clearly show highlighted vs. non-highlighted segments
- **Consistency** — Matches the visual style of other charts in the application

### URL-First Architecture Reference

The year chart implements range selection by returning a pipe-delimited string (`2010|2020`) from `handleClick`, which `toUrlParams` then splits into separate `yearMin` and `yearMax` parameters. This demonstrates how chart sources can produce complex URL structures from simple user interactions.

---

## What

### Step 652.1: Create the Year Chart Source File

Create the file `src/app/domain-config/automobile/chart-sources/year-chart-source.ts`: