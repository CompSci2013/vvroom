# 208: Popout Interface

**Status:** Planning
**Depends On:** 201-domain-config-interface
**Blocks:** 307-popout-context-service, 308-popout-manager-service, 904-popout-component

---

## Learning Objectives

After completing this section, you will:
- Understand how pop-out windows communicate with the parent application
- Know how to use the BroadcastChannel API for cross-window messaging
- Recognize the challenges of maintaining state synchronization across windows

---

## Objective

Create the popout interfaces that define how pop-out windows communicate with the parent application. These interfaces establish the message protocol, window configuration, and context tracking needed for the pop-out feature.

---

## Why

The vvroom application supports "pop-out" functionality: users can detach panels (charts, pickers, filters) into separate browser windows. This is powerful for multi-monitor setups where users might want a chart on one screen while filtering on another.

**The challenge:** How do separate browser windows share state?

```
┌─────────────────────────────────────────────────────────────────┐
│  Parent Window (Main Application)                                │
│  - Controls URL state                                            │
│  - Manages filter selections                                     │
│  - Coordinates all pop-outs                                      │
└─────────────────────────────────────────────────────────────────┘
        │                           │                           │
        │ BroadcastChannel          │                           │
        ▼                           ▼                           ▼
┌───────────────────┐    ┌───────────────────┐    ┌───────────────────┐
│   Pop-out: Chart  │    │  Pop-out: Picker  │    │ Pop-out: Filters  │
│   (Separate Tab)  │    │  (Separate Tab)   │    │  (Separate Tab)   │
└───────────────────┘    └───────────────────┘    └───────────────────┘
```

**Solution:** The [BroadcastChannel API](https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel) allows communication between browser contexts (tabs, windows, iframes) on the same origin.

The popout interfaces define:
1. **Message types** — What kinds of messages can be sent
2. **Message payloads** — What data each message contains
3. **Window configuration** — Size, position, features
4. **Context tracking** — Is this window a pop-out? Which panel?