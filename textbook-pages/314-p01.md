# 314: Global Error Handler

**Status:** Complete
**Depends On:** 312-error-notification-service, 313-http-error-interceptor
**Blocks:** Phase 8 (Framework Components)

---

## Learning Objectives

After completing this section, you will:
- Understand how Angular's ErrorHandler interface works
- Know how to catch unhandled exceptions globally
- Recognize different error types (HTTP, chunk load, promise rejection)
- Be able to provide user-friendly messages for JavaScript errors

---

## Objective

Create the `GlobalErrorHandler` that catches all unhandled exceptions in the Angular application and displays user-friendly error messages using the ErrorNotificationService.

---

## Why

Errors escape individual component handlers for many reasons:
- Developers forget to add `.catch()` to promises
- Observable subscriptions don't include error callbacks
- Third-party libraries throw unexpectedly
- Template expressions throw during rendering

Without global error handling, these errors:
- Crash silently with cryptic console messages
- Leave users staring at broken UIs with no feedback
- Make debugging difficult without context

### Angular's ErrorHandler

Angular provides an `ErrorHandler` class that catches all unhandled errors. By default, it just logs to console. We replace it with our `GlobalErrorHandler` that:

1. **Categorizes errors** — HTTP vs chunk load vs promise rejection vs generic
2. **Shows user feedback** — Toast notifications explain what went wrong
3. **Logs context** — URL, route, stack trace for debugging

### Error Types

The global handler categorizes errors by type:

| Type | Detection | Example |
|------|-----------|---------|
| HTTP Error | `instanceof HttpErrorResponse` | API returned 500 |
| Chunk Load Error | Message contains "loading chunk" | Lazy module failed to load |
| Promise Rejection | Error has `.rejection` property | Unhandled async error |
| Generic Error | Default | TypeError, ReferenceError |

Each type gets appropriate handling:

| Type | Display | Duration |
|------|---------|----------|
| HTTP Error | Error toast | 5 seconds |
| Chunk Load Error | Sticky toast (requires action) | Until dismissed |
| Promise Rejection | Error toast | 7 seconds |
| Generic Error | Sticky toast | Until dismissed |