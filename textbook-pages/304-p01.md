# 304: Domain Config Registry

**Status:** Complete
**Depends On:** 201-domain-config-interface
**Blocks:** 305-domain-config-validator, 306-resource-management-service, 310-filter-options-service, 311-picker-config-registry

---

## Learning Objectives

After completing this section, you will:
- Understand the Registry pattern and when to use it
- Know how to use Angular InjectionTokens for flexible configuration
- Recognize how runtime registration enables multi-domain applications
- Be able to implement a type-safe configuration registry

---

## Objective

Create the `DomainConfigRegistry` service that provides centralized management of domain configurations. This registry allows domains to be registered, retrieved, and switched at runtime.

---

## Why

The vvroom application is designed to be domain-agnostic. The framework doesn't know about automobiles â€” it knows about `DomainConfig`. This raises a question: *how does the framework access domain-specific configuration?*

### Option 1: Import Directly

```typescript
// In a component
import { AUTOMOBILE_DOMAIN_CONFIG } from './domain-config/automobile';

@Component({...})
export class DiscoverComponent {
  config = AUTOMOBILE_DOMAIN_CONFIG;
}
```

This works, but:
- Hard-codes the domain in the component
- Can't switch domains at runtime
- Can't add new domains without modifying framework code

### Option 2: Injection Token

```typescript
// In a module
providers: [
  { provide: DOMAIN_CONFIG, useValue: AUTOMOBILE_DOMAIN_CONFIG }
]

// In a component
constructor(@Inject(DOMAIN_CONFIG) private config: DomainConfig<...>) {}
```

Better, but:
- Only one domain at a time
- No runtime switching
- No validation

### Option 3: Registry Pattern (Our Approach)

```typescript
// At app startup
registry.register(AUTOMOBILE_DOMAIN_CONFIG);
registry.register(REAL_ESTATE_DOMAIN_CONFIG);

// In a component
const config = registry.getActive();

// Switch domain
registry.setActive('real-estate');
```

The registry:
- Stores multiple domain configurations
- Provides runtime switching
- Validates configurations on registration
- Offers type-safe retrieval