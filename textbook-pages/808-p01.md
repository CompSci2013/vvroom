# 808: Statistics Panel 2 Component

**Status:** Planning
**Depends On:** 801-base-chart-component, 606-chart-configs, 651-654 (Chart Data Sources)
**Blocks:** 809-dockview-statistics-panel, 903-discover-page-component

---

## Learning Objectives

After completing this section, you will:
- Understand how to build a CDK drag-drop chart grid with horizontal orientation
- Know how to coordinate chart clicks with URL state updates
- Be able to implement pop-out placeholder patterns for multi-window applications

---

## Objective

Build a statistics panel component that renders multiple charts in a draggable grid layout using Angular CDK. This component composes `BaseChartComponent` instances and handles chart ordering, pop-out functionality, and click event coordination with URL state.

---

## Why

The original `StatisticsPanelComponent` (document 804) introduced the concept of a chart grid. `StatisticsPanel2Component` refines this pattern with:

1. **CDK horizontal orientation** — Charts drag horizontally, wrapping to rows
2. **Pop-out awareness** — Shows placeholder when a chart is in a separate window
3. **Pop-out window support** — Works correctly when rendered inside a pop-out window
4. **URL state coordination** — Chart clicks update URL via data sources

### Why a Second Statistics Panel?

The application needs different chart layouts in different contexts:
- **Discover page**: Full statistics panel with all charts
- **Pop-out windows**: Subset of charts (e.g., just manufacturer and models)

`StatisticsPanel2Component` supports both via the optional `chartIds` input.

### Angular Style Guide References

- [Style 03-02](https://angular.io/guide/styleguide#style-03-02): Use delegation over inheritance
- [Style 05-02](https://angular.io/guide/styleguide#style-05-02): Use input properties for data binding

### URL-First Architecture Reference

When a user clicks on a chart element:
1. `BaseChartComponent` emits `chartClick` event with value and highlight mode
2. `StatisticsPanel2Component` receives the event
3. Data source's `toUrlParams()` converts the click to URL parameters
4. URL state is updated (directly or via pop-out message)

This maintains the URL-First principle: all state flows through the URL.