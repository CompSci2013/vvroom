### Injection Token vs Service

| Feature | Injection Token | Service |
|---------|-----------------|---------|
| Value type | Primitive (boolean, string, etc.) | Object with methods |
| Computed | Once at creation | Can change over time |
| Dependencies | Via factory function | Via constructor |
| Use case | Static configuration | Dynamic behavior |

For "is this a pop-out?", an injection token is ideal because:
- The answer never changes during the window's lifetime
- It's a simple boolean, not a complex object
- Components just need to read it, not call methods

---

## What

### Step 315.1: Create the Tokens Directory

Create the tokens directory and barrel file.

Create `src/app/framework/tokens/index.ts`:

```typescript
// src/app/framework/tokens/index.ts
// VERSION 1 (Section 315) - Framework injection tokens

export * from './popout.token';
```

---

### Step 315.2: Create the Pop-Out Token

Create the file `src/app/framework/tokens/popout.token.ts`:

```typescript
// src/app/framework/tokens/popout.token.ts
// VERSION 1 (Section 315) - Pop-out window detection token

import { InjectionToken } from '@angular/core';

/**
 * Injection token for pop-out window detection
 *
 * Provides a boolean indicating whether the current window is a pop-out window.
 * This value is determined once at bootstrap based on the URL and never changes.
 *
 * **Usage:**
 *
 * ```typescript
 * constructor(@Inject(IS_POPOUT_TOKEN) public isPopOut: boolean) {}
 * ```
 *
 * **In Templates:**
 *
 * ```html
 * <nav *ngIf="!isPopOut">Main navigation</nav>
 * <button *ngIf="isPopOut" (click)="close()">Close</button>
 * ```
 *
 * **Providing the Token:**
 *
 * ```typescript
 * // In app.module.ts
 * {
 *   provide: IS_POPOUT_TOKEN,
 *   useFactory: () => window.location.pathname.includes('/popout/')
 * }
 * ```
 */
export const IS_POPOUT_TOKEN = new InjectionToken<boolean>('IS_POPOUT_TOKEN');
```

---

### Step 315.3: Create the Factory Function

Add a factory function to provide the token value. Update `src/app/framework/tokens/popout.token.ts`: