---

### Step 303.2: Update the Barrel File

Update `src/app/framework/services/index.ts`:

```typescript
// src/app/framework/services/index.ts
// VERSION 3 (Section 303) - Added RequestCoordinatorService

export * from './url-state.service';
export * from './api.service';
export * from './request-coordinator.service';
```

---

## Verification

### 1. Check File Exists

```bash
$ ls -la src/app/framework/services/request-coordinator.service.ts
```

### 2. TypeScript Compilation Check

```bash
$ npx tsc --noEmit src/app/framework/services/request-coordinator.service.ts
```

Expected: No output (no compilation errors).

### 3. Build the Application

```bash
$ ng build
```

Expected: Build succeeds with no errors.

### 4. Verify Deduplication (Optional)

Add temporary test code:

```typescript
// In any component
constructor(
  private api: ApiService,
  private coordinator: RequestCoordinatorService
) {
  // Fire same request 5 times simultaneously
  for (let i = 0; i < 5; i++) {
    this.coordinator.execute(
      'test-dedup',
      () => this.api.get<any>('http://generic-prime.minilab/api/specs/v1/automobiles')
    ).subscribe(response => {
      console.log(`Request ${i} received:`, response);
    });
  }
}
```

In browser DevTools Network tab, you should see only **1** HTTP request, but 5 console logs.

### 5. Verify Caching (Optional)

```typescript
// First request
this.coordinator.execute('test-cache', () => this.api.get<any>(url))
  .subscribe(() => console.log('First request complete'));

// Second request after 1 second (should be cached)
setTimeout(() => {
  this.coordinator.execute('test-cache', () => this.api.get<any>(url))
    .subscribe(() => console.log('Second request complete (from cache)'));
}, 1000);

// Third request after 35 seconds (cache expired, new request)
setTimeout(() => {
  this.coordinator.execute('test-cache', () => this.api.get<any>(url))
    .subscribe(() => console.log('Third request complete (fresh)'));
}, 35000);
```

Network tab should show 2 requests total (first and third).